# AiDD Workflow

このプロジェクトにおける AI-Driven Development のワークフロー定義。

## 全体フロー
```
Phase 0          Phase 1-N              Phase Final
立ち上げ    →    イテレーション    →    仕上げ
(1回)            (繰り返し)             (1回)
```

## Phase 0: プロジェクト立ち上げ

### 目的
- プロジェクトの全体像を把握
- 初期ドキュメント群を作成
- AiDDの土台を整える

### 実行コマンド
```
/init-project
```

### 成果物
- docs/product/VISION.md
- docs/product/BACKLOG.md
- docs/product/DEFINITION_OF_DONE.md
- docs/architecture/CONSTRAINTS.md
- docs/learning/INTENT.md（初期仮説）

### 完了条件
- [ ] 課題の目的を自分の言葉で説明できる
- [ ] やるべきことがBACKLOGに優先度付きで並んでいる
- [ ] 制約（norm、許可関数）が明文化されている

### 役割
| 誰 | 何をする |
|----|---------|
| Claude | ドキュメント草案作成 |
| Minato | レビュー、修正指示、承認 |

---

## Phase 1-N: イテレーションサイクル

### 目的
- BACKLOGを消化
- 動くコードを積み上げる
- 学びを蓄積する

### 1イテレーションの流れ
```
Minatoがゴール設定（プランニング）
        ↓
┌─────────────────────────────┐
│ セッション（繰り返し）        │
│  /start                     │
│   ↓                         │
│  Claude作業                  │
│   ↓                         │
│  /session-end               │
│   ↓                         │
│  Minatoレビュー（非同期）     │
└─────────────────────────────┘
        ↓
    完了判定
        ↓
    /retro
        ↓
    次のイテレーションへ
```

### セッション開始
```
/start
```
- CLAUDE.mdの現在状況を読み込み
- 前回の続きから再開
- Minatoからゴール指示を受ける

### セッション終了
```
/session-end
```
- 会話ログを docs/sessions/ に保存
- CLAUDE.mdの「現在の状況」を更新
- 次のアクションを明記

### イテレーション完了時
```
/retro
```
- OUTCOME.md 作成
- REVIEW.md 作成（Minatoが記入）
- RETRO.md 作成
- アーカイブへ移動

### 役割
| 誰 | 何をする |
|----|---------|
| Minato | ゴール設定、レビュー、承認/差し戻し |
| Claude | 実装、ドキュメント更新、ログ出力 |

---

## Phase Final: 仕上げ

### 目的
- レビュー（試験）に向けた準備
- ドキュメント最終整備
- 知識の定着確認

### 実行コマンド
```
/finish
```

### やること
- [ ] EXAM_PREP.md の完成
- [ ] 全コードの説明準備
- [ ] 想定質問への回答準備
- [ ] LEARNINGS.md の振り返り
- [ ] ARCHITECTURE.md の最終更新

### 完了条件
- [ ] 任意のコード行について「なぜ」を説明できる
- [ ] 設計判断の理由をすべて説明できる
- [ ] 想定質問に詰まらず回答できる

### 役割
| 誰 | 何をする |
|----|---------|
| Claude | 質問シミュレーション、抜け漏れ指摘 |
| Minato | 回答、最終確認 |

---

## コマンド一覧

| コマンド | フェーズ | 説明 |
|---------|---------|------|
| `/init-project` | Phase 0 | プロジェクト立ち上げ |
| `/start` | Phase 1-N | セッション開始 |
| `/session-end` | Phase 1-N | セッション終了 |
| `/retro` | Phase 1-N | イテレーション振り返り |
| `/learn` | 随時 | 学習記録 |
| `/finish` | Phase Final | 仕上げモード |

---

## 注意事項

### Minatoの責務
- プランニング（ゴール設定）は必ず自分で行う
- レビューは必ず自分で行う
- 承認なしにClaudeはコミットしない

### Claudeの責務
- 指示されたゴールに向かって作業
- 判断に迷ったら確認する
- ドキュメントを常に最新に保つ
- セッション終了時にログを残す

### ドキュメント更新タイミング
| ドキュメント | いつ更新 |
|-------------|---------|
| CLAUDE.md | 毎セッション終了時 |
| BACKLOG.md | タスク完了時、優先度変更時 |
| DECISIONS.md | 設計判断時 |
| LEARNINGS.md | 気づき発生時 |
| ARCHITECTURE.md | 構造変更時 |