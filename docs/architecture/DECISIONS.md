# Architecture Decision Records

## ADR-001: 引数のINT_MAX超えをエラーとする

### 日付
2025-12-23

### ステータス
承認

### 文脈
引数パース時に、INT_MAXを超える値が入力された場合の挙動を決める必要があった。
subjectには引数の上限値について明確な指定がない。

### 選択肢
1. **INT_MAX超えたらFAILURE**
   - 利点: オーバーフロー防止、安全
   - 欠点: 厳しすぎる可能性

2. **long longで受けてから範囲チェック**
   - 利点: より厳密な制御
   - 欠点: 実装が複雑

3. **そのまま変換、壊れたら壊れる**
   - 利点: シンプル
   - 欠点: オーバーフローで負の値になり意図しない動作の可能性

### 決定
選択肢1（INT_MAX超えたらFAILURE）を採用する。

### 理由
- オーバーフローで負の値になると、`time_to_die`等が負になり意図しない動作を引き起こす
- 現実的に`number_of_philosophers`がINT_MAX人いたらメモリが足りない
- 壊れた動作をするより、明示的にエラーで弾く方が安全
- 評価では200人程度のテストが多く、INT_MAX対策は安全策として妥当

### 影響
- ft_atoi_safe関数でINT_MAXチェックを実装
- 極端に大きな入力はエラーとして拒否される

---

## ADR-002: [次の決定事項]
...
