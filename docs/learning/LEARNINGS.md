# Learnings

技術的な気づき・理解の記録。時系列で追記。

---

## 2025-12-23: mutexは「鍵」であり「金庫」ではない

### 何を学んだか
mutexは変数そのものを保護するのではなく、「同じmutexをlockしているコード同士」が同時に実行されないようにする仕組み。

### どういう文脈で
`print_status`関数で`death_mutex`をロックしているのに、保護したいのは`someone_died`という別の変数だった。「lockとunlockの間で引数（mutex）が使われてないのはなぜ？」という疑問から。

### 以前の理解
- mutexをロックすると、その引数の変数が自動的に保護される
- 言語が自動で守ってくれる

### 新しい理解
- `pthread_mutex_t`は「鍵」の機能を持つ特殊な型
- `int`などの普通の変数には鍵の機能がない
- どの鍵でどのデータを守るかは**プログラマが決めるルール**
- 「`someone_died`にアクセスするときは必ず`death_mutex`をlock/unlockする」という約束を全コードで守る必要がある
- 用途別にmutexを分けると、不要なブロックを減らせる（ドライヤー使用中でも歯ブラシは使える）

### 関連
- philo/utils.c: `print_status`関数
- philo/philo.h: `t_data`構造体内のmutex定義
